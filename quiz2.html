<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í† ìŠ¤ ê²Œì„ - ë‹¨ê³„ë³„ ì±Œë¦°ì§€</title>
    <style>
        body { 
            font-family: 'Pretendard', -apple-system, sans-serif; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
            background: #f5f7fa; 
            color: #333; 
            overflow: hidden; 
        }

        .card { 
            background: white; 
            padding: 30px 20px; 
            border-radius: 30px; 
            text-align: center; 
            width: 350px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); 
        }

        #level-info { 
            color: #1a73e8; 
            font-weight: bold; 
            font-size: 1.3rem; 
            margin-bottom: 10px; 
        }

        #timer-container { 
            width: 100%; 
            background: #e8f0fe; 
            height: 8px; 
            border-radius: 10px; 
            margin: 20px 0; 
            overflow: hidden; 
        }

        #timer-bar { 
            width: 100%; 
            height: 100%; 
            background: #1a73e8; 
            transition: linear; 
        }

        /* ê·¸ë¦¬ë“œ ê¸°ë³¸ ìŠ¤íƒ€ì¼ (JSì—ì„œ ì»¬ëŸ¼ ìˆ˜ ì¡°ì ˆ) */
        .grid { 
            display: grid; 
            gap: 10px; 
            margin-top: 25px; 
        }

        .grid button { 
            aspect-ratio: 1; 
            border: 2px solid #e8f0fe; 
            border-radius: 12px; 
            background: #ffffff; 
            color: #1a73e8; 
            font-size: 0.9rem; 
            font-weight: bold; 
            cursor: pointer; 
            padding: 0; 
            transition: all 0.2s;
            box-shadow: 0 2px 8px rgba(26, 115, 232, 0.05);
        }

        .grid button:active { 
            background: #f1f6ff; 
            transform: scale(0.95); 
        }

        .instruction {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>

<div class="card">
    <div id="level-info">Level 1</div>
    <div id="timer-container"><div id="timer-bar"></div></div>
    <div class="instruction">ë‹¤ë¥¸ ê¸€ìë¥¼ í•˜ë‚˜ ì°¾ìœ¼ì„¸ìš”!</div>
    <div class="grid" id="game-grid"></div>
</div>

<script>
    // ì‚¬ìš©ì ìš”ì²­ êµ¬ì„±: 1ë‹¨ê³„(2x2), 2ë‹¨ê³„(3x3), 3ë‹¨ê³„(4x4), 4ë‹¨ê³„(5x5)
    // ì‹œê°„ì€ ì¼ê´€ë˜ê²Œ 4ì´ˆ(4000ms) ê·¼ì²˜ë¡œ ì„¤ì •
    const stages = [
        { size: 2, normal: "SALC", diff: "SAIC", time: 4300 }, // 1ë‹¨ê³„: 2x2
        { size: 3, normal: "SALC", diff: "SAIC", time: 4300 }, // 2ë‹¨ê³„: 3x3
        { size: 4, normal: "SALC", diff: "SAIC", time: 4300 }, // 3ë‹¨ê³„: 4x4
        { size: 5, normal: "SALC", diff: "SAIC", time: 4300 }  // 4ë‹¨ê³„: 5x5
    ];

    let currentLevel = 0;
    let timer;

    function initGame() {
        if (currentLevel >= stages.length) {
            alert("ğŸŠ ëª¨ë“  ë‹¨ê³„ë¥¼ í´ë¦¬ì–´í–ˆìŠµë‹ˆë‹¤! ë‹¹ì‹ ì˜ ëˆˆë¯¸ì°ì€ ëŒ€ë‹¨í•˜êµ°ìš”.");
            window.location.href = 'index.html';
            return;
        }

        const stage = stages[currentLevel];
        const gridSize = stage.size;
        const totalCells = gridSize * gridSize;

        document.getElementById('level-info').innerText = `Level ${currentLevel + 1} (${gridSize}x${gridSize})`;
        
        const grid = document.getElementById('game-grid');
        // ê·¸ë¦¬ë“œ ì»¬ëŸ¼ ìˆ˜ ë™ì  ë³€ê²½
        grid.style.gridTemplateColumns = `repeat(${gridSize}, 1fr)`;
        grid.innerHTML = "";

        const diffIndex = Math.floor(Math.random() * totalCells);

        for (let i = 0; i < totalCells; i++) {
            const btn = document.createElement('button');
            // ì¹¸ì´ ë§ì•„ì§€ë©´ ê¸€ì í¬ê¸°ë¥¼ ì‚´ì§ ì¤„ì„
            if (gridSize >= 5) btn.style.fontSize = "0.7rem";
            
            btn.innerText = (i === diffIndex) ? stage.diff : stage.normal;
            btn.onclick = () => {
                if(i === diffIndex) {
                    clearTimeout(timer);
                    currentLevel++;
                    initGame();
                } else {
                    alert("âŒ í‹€ë ¸ìŠµë‹ˆë‹¤! ë‹¤ì‹œ ì§‘ì¤‘í•´ë³´ì„¸ìš”.");
                    location.reload();
                }
            };
            grid.appendChild(btn);
        }
        startTimer(stage.time);
    }

    function startTimer(duration) {
        const bar = document.getElementById('timer-bar');
        bar.style.transition = 'none';
        bar.style.width = '100%';
        bar.offsetHeight; 
        bar.style.transition = `width ${duration}ms linear`;
        bar.style.width = '0%';

        clearTimeout(timer);
        timer = setTimeout(() => {
            alert("â° ì‹œê°„ ì´ˆê³¼! ì¡°ê¸ˆ ë” ë¹ ë¥´ê²Œ ì°¾ì•„ì•¼ í•´ìš”.");
            location.reload();
        }, duration);
    }

    initGame();
</script>

</body>
</html>
